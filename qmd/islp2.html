<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>islp2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<link href="../https://assets.qiufei.site/personal/profile.jpg" rel="icon" type="image/jpeg">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-8ea72dc5fed832574809a9c94082fbbb.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-681fbf911679f9b3dbf9743eb275ba49.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-7e49aeac8059a213a463aa1a739e8272.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io"> 
<span class="menu-text">首页</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io/web-slide-r"> 
<span class="menu-text">R课件</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://qiufei.github.io/web-slide-marketing"> 
<span class="menu-text">营销课件</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="introduction-to-statistical-learning" class="level2">
<h2 class="anchored" data-anchor-id="introduction-to-statistical-learning">Introduction to Statistical Learning</h2>
<div style="font-size: 0.8em;">
<p>Statistical learning is a vast set of tools for <strong>understanding data</strong>. These tools can be classified as <strong>supervised</strong> or <strong>unsupervised</strong>.</p>
<ul>
<li><strong>Supervised statistical learning</strong> involves building a statistical model for predicting, or estimating, an <em>output</em> based on one or more <em>inputs</em>.</li>
<li>With <strong>unsupervised statistical learning</strong>, there are inputs but no supervising output; nevertheless, we can learn relationships and structure from such data.</li>
</ul>
<p>This chapter introduces many of the key concepts of statistical learning, focusing on the fundamental ideas, which include <em>data mining</em>, <em>machine learning</em> and statistical learning relationship, <em>estimating f</em>, the <em>trade-off between prediction accuracy and model interpretability</em>, <em>supervised versus unsupervised learning</em>, and assessing model accuracy using <em>mean square error</em>, <em>the bias-variance</em>, <em>Bayes error rate</em>.</p>
</div>
</section>
<section id="data-mining-machine-learning-and-statistical-learning" class="level2">
<h2 class="anchored" data-anchor-id="data-mining-machine-learning-and-statistical-learning">Data Mining, Machine Learning, and Statistical Learning</h2>
<div style="font-size: 0.8em;">
<p>Let’s clarify the relationship between these often-used terms:</p>
<ul>
<li><p><strong>Data Mining:</strong> The process of discovering patterns and insights from large datasets, often using computational techniques. It emphasizes finding <em>any</em> interesting pattern, even if it’s not directly related to a specific prediction task.</p></li>
<li><p><strong>Machine Learning:</strong> A field of computer science focused on algorithms that can learn from data. It’s heavily focused on <em>prediction</em> – enabling computers to make accurate predictions on new, unseen data.</p></li>
<li><p><strong>Statistical Learning:</strong> A subfield of statistics that focuses on developing and applying statistical models and methods for prediction and inference. It emphasizes understanding the <em>relationships</em> between variables and making <em>inferences</em> about the underlying data-generating process.</p></li>
<li><p>All the concepts are focusing on <em>extracting information from data.</em></p></li>
</ul>
</div>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[Data Mining] --&gt; C(Common Ground)
    B[Machine Learning] --&gt; C
    D[Statistical Learning] --&gt; C
    C --&gt; E[Insights &amp; Predictions]
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</section>
<section id="the-advertising-example" class="level2">
<h2 class="anchored" data-anchor-id="the-advertising-example">The Advertising Example</h2>
<div style="font-size: 0.8em;">
<p>To motivate our study, let’s consider a simple example. A company wants to understand how advertising spending affects product sales.</p>
<ul>
<li><p><strong>Data:</strong> <code>Sales</code> of a product in 200 different markets, along with advertising budgets for <code>TV</code>, <code>radio</code>, and <code>newspaper</code>.</p></li>
<li><p><strong>Goal:</strong> Build a model to predict <code>sales</code> based on the advertising budgets in the three media.</p></li>
<li><p><strong>Why?</strong> The company can’t directly control sales, but <em>can</em> control advertising spending. A good model helps them optimize their advertising budget.</p></li>
</ul>
</div>
</section>
<section id="input-and-output-variables" class="level2">
<h2 class="anchored" data-anchor-id="input-and-output-variables">Input and Output Variables</h2>
<div style="font-size: 0.75em;">
<p>In the advertising example:</p>
<ul>
<li><p><strong>Input variables (X):</strong> Advertising budgets (TV, radio, newspaper). These are also called <em>predictors</em>, <em>independent variables</em>, or <em>features</em>. We often denote them as X₁, X₂, X₃, …, Xₚ.</p></li>
<li><p><strong>Output variable (Y):</strong> Sales. This is also called the <em>response</em> or <em>dependent variable</em>. We’re trying to predict or understand <em>Y</em>.</p></li>
<li><p>Statistical learning will use all these terms interchangeably.</p></li>
</ul>
<div style="color: blue;">
<div class="incremental">
<ul class="incremental">
<li><strong>Example</strong>:
<ul class="incremental">
<li>X₁ = TV budget</li>
<li>X₂ = Radio budget</li>
<li>X₃ = Newspaper budget</li>
<li>Y = Sales</li>
</ul></li>
</ul>
</div>
</div>
</div>
</section>
<section id="visualizing-the-advertising-data" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-the-advertising-data">Visualizing the Advertising Data</h2>
<div style="font-size: 0.75em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_1.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Advertising Data: Sales vs.&nbsp;Advertising Budgets</figcaption>
</figure>
</div>
<div class="nonincremental">
<ul>
<li>Each plot shows sales versus one advertising medium.</li>
<li>The blue line represents a simple linear model (least squares fit) to predict sales using each medium individually. Least squares is an algorithm to fit data. We’ll learn more about this in Chapter 3.</li>
<li><strong>Observations</strong>: There’s a positive relationship between advertising spending and sales for TV and radio. The relationship with newspaper spending is less clear.</li>
</ul>
</div>
</div>
</section>
<section id="the-general-model" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="the-general-model">The General Model</h2>
<div style="font-size: 0.8em;" class="page-columns page-full">
<p>More generally, we assume a relationship between the response <em>Y</em> and predictors <em>X</em>:</p>
<p><span class="math display">\[
Y = f(X) + \epsilon
\]</span></p>
<ul>
<li><strong>Y:</strong> The quantitative response variable we want to predict.</li>
<li><strong>X:</strong> (X₁, X₂, …, Xₚ), a vector of <em>p</em> predictors.</li>
<li><strong>f(X):</strong> An <em>unknown</em> function representing the <em>systematic</em> relationship between <em>X</em> and <em>Y</em>. This is what we want to estimate!</li>
<li><strong>ε:</strong> A random <em>error term</em>, independent of <em>X</em>, with a mean of zero. It represents the variation in <em>Y</em> that <em>cannot</em> be explained by <em>f(X)</em>.</li>
</ul>

<div class="no-row-height column-margin column-container"><div class="margin-aside">
<p><strong>Goal of Statistical Learning:</strong> Estimate the unknown function <em>f</em>.</p>
</div></div></div>
</section>
<section id="understanding-the-error-term-ε" class="level2">
<h2 class="anchored" data-anchor-id="understanding-the-error-term-ε">Understanding the Error Term (ε)</h2>
<div style="font-size: 0.8em;">
<p>The error term, ε, captures all the factors that affect <em>Y</em> but are not included in our predictors <em>X</em>. This could include:</p>
<ul>
<li><strong>Unmeasured variables:</strong> Factors influencing <em>Y</em> that we didn’t or couldn’t measure.</li>
<li><strong>Measurement error:</strong> Inaccuracies in how we measured <em>X</em> or <em>Y</em>.</li>
<li><strong>Randomness:</strong> Inherent variability in <em>Y</em> that can’t be perfectly predicted.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The error term is crucial. It acknowledges that our models are <em>approximations</em> of reality. Even the “best” model won’t be perfect.</p>
</div>
</div>
</div>
</section>
<section id="example-income-vs.-education" class="level2">
<h2 class="anchored" data-anchor-id="example-income-vs.-education">Example: Income vs.&nbsp;Education</h2>
<div style="font-size: 0.8em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_2.png" class="img-fluid figure-img" style="width:80.0%"></p>
<figcaption>Income vs.&nbsp;Years of Education</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Left:</strong> Observed <code>income</code> (in thousands of dollars) versus <code>years of education</code> for 30 individuals.</p></li>
<li><p><strong>Right:</strong> The <em>true</em> underlying relationship (blue curve), which is usually <em>unknown</em> (but known here because the data were simulated). The black line segments represent errors associated with each data.</p></li>
<li><p><strong>Observation:</strong> More years of education generally lead to higher income, but there’s variation (the error).</p></li>
</ul>
</div>
</section>
<section id="why-estimate-f" class="level2">
<h2 class="anchored" data-anchor-id="why-estimate-f">Why Estimate <em>f</em>?</h2>
<div style="font-size: 0.8em;">
<p>There are two main reasons to estimate <em>f</em>:</p>
<ol type="1">
<li><p><strong>Prediction:</strong> We want to predict <em>Y</em> given a set of <em>X</em> values. We don’t necessarily care about the <em>exact</em> form of <em>f</em>, just that it gives accurate predictions (treat <em>f</em> as a “black box”).</p>
<p><span class="math display">\[
\hat{Y} = \hat{f}(X)
\]</span></p>
<ul>
<li><strong>Ŷ:</strong> The <em>prediction</em> of <em>Y</em>.</li>
<li><strong>f̂:</strong> Our <em>estimate</em> of <em>f</em>.</li>
</ul></li>
<li><p><strong>Inference:</strong> We want to <em>understand</em> the relationship between <em>Y</em> and <em>X</em>. We <em>do</em> care about the form of <em>f</em>. We want to answer questions like:</p>
<ul>
<li>Which predictors are associated with the response?</li>
<li>Is the relationship positive or negative?</li>
<li>Is the relationship linear or more complex?</li>
</ul></li>
</ol>
</div>
</section>
<section id="prediction-reducible-and-irreducible-error" class="level2">
<h2 class="anchored" data-anchor-id="prediction-reducible-and-irreducible-error">Prediction: Reducible and Irreducible Error</h2>
<div style="font-size: 0.8em;">
<p>The accuracy of our prediction, Ŷ, depends on two types of error:</p>
<ol type="1">
<li><p><strong>Reducible Error:</strong> Error due to our estimate of <em>f</em> (f̂) not being perfect. We <em>can</em> reduce this error by choosing better statistical learning techniques.</p></li>
<li><p><strong>Irreducible Error:</strong> Error due to the random error term, ε. Even if we knew the <em>true</em> f, we <em>cannot</em> predict ε. This sets a limit on how accurate our predictions can be. <span class="math display">\[E(Y - \hat{Y})^2 = \underbrace{[f(X) - \hat{f}(X)]^2}_{\text{Reducible}} + \underbrace{Var(\epsilon)}_{\text{Irreducible}}\]</span></p></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Our goal is to minimize the <em>reducible</em> error.</p>
</div>
</div>
</div>
</section>
<section id="inference-understanding-the-relationship" class="level2">
<h2 class="anchored" data-anchor-id="inference-understanding-the-relationship">Inference: Understanding the Relationship</h2>
<div style="font-size: 0.8em;">
<p>When our goal is inference, we want to understand <em>how</em> Y changes as a function of X₁, …, Xₚ. We’re interested in questions like:</p>
<ul>
<li><strong>Which predictors matter?</strong> Are all the Xᵢ related to Y, or only a subset?</li>
<li><strong>What’s the nature of the relationship?</strong> Is it positive, negative, linear, non-linear?</li>
<li><strong>Can we simplify the model?</strong> Can we get a good understanding with a simpler model (e.g., a linear model)?</li>
</ul>
<p>We care about interpretability, the form of <em>f</em>, and statistical significance.</p>
</div>
</section>
<section id="example-modeling-for-prediction" class="level2">
<h2 class="anchored" data-anchor-id="example-modeling-for-prediction">Example: Modeling for Prediction</h2>
<div style="font-size: 0.8em;">
<p><strong>Scenario:</strong> A company wants to target a direct-marketing campaign to individuals likely to respond positively.</p>
<ul>
<li><strong>Predictors (X):</strong> Demographic variables (age, income, location, etc.).</li>
<li><strong>Response (Y):</strong> Response to the campaign (positive or negative).</li>
<li><strong>Goal:</strong> Accurately predict <em>Y</em> using <em>X</em>. The company <em>doesn’t</em> need to deeply understand <em>why</em> each predictor is related to the response, only that the prediction is accurate.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a classic <em>prediction</em> problem. The model is a “black box”.</p>
</div>
</div>
</div>
</section>
<section id="example-modeling-for-inference" class="level2">
<h2 class="anchored" data-anchor-id="example-modeling-for-inference">Example: Modeling for Inference</h2>
<div style="font-size: 0.8em;">
<p><strong>Scenario:</strong> Analyze the <code>Advertising</code> data (Figure 2.1).</p>
<ul>
<li><strong>Predictors (X):</strong> TV, radio, and newspaper advertising budgets.</li>
<li><strong>Response (Y):</strong> Sales.</li>
<li><strong>Goal:</strong> Understand <em>how</em> each advertising medium affects sales. Questions to answer:
<ul>
<li>Which media are associated with sales?</li>
<li>Which media generate the biggest boost in sales?</li>
<li>How large is the effect of TV advertising on sales?</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is an <em>inference</em> problem. We want to understand the <em>relationships</em>.</p>
</div>
</div>
</div>
</section>
<section id="how-do-we-estimate-f" class="level2">
<h2 class="anchored" data-anchor-id="how-do-we-estimate-f">How Do We Estimate <em>f</em>?</h2>
<div style="font-size: 0.8em;">
<p>We use <strong>training data</strong> to “teach” our statistical learning method how to estimate <em>f</em>.</p>
<ul>
<li><p><strong>Training data:</strong> A set of observed data points: {(x₁, y₁), (x₂, y₂), …, (xₙ, yₙ)}, where:</p>
<ul>
<li>xᵢ = (xᵢ₁, xᵢ₂, …, xᵢₚ)ᵀ is the vector of predictor values for the <em>i</em>th observation.</li>
<li>yᵢ is the response value for the <em>i</em>th observation.</li>
</ul></li>
<li><p><strong>Goal:</strong> Find a function, f̂, such that Y ≈ f̂(X) for <em>any</em> observation (X, Y).</p></li>
<li><p><strong>Two broad approaches:</strong> Parametric and non-parametric methods.</p></li>
</ul>
</div>
</section>
<section id="parametric-methods" class="level2">
<h2 class="anchored" data-anchor-id="parametric-methods">Parametric Methods</h2>
<div style="font-size: 0.8em;">
<p>A two-step, model-based approach:</p>
<ol type="1">
<li><p><strong>Assume a functional form for <em>f</em>.</strong> For example, assume <em>f</em> is <em>linear</em>:</p>
<p><span class="math display">\[
f(X) = \beta_0 + \beta_1 X_1 + \beta_2 X_2 + ... + \beta_p X_p
\]</span></p>
<p>This reduces the problem to estimating the <em>p</em> + 1 coefficients (β₀, β₁, …, βₚ).</p></li>
<li><p><strong>Use training data to <em>fit</em> or <em>train</em> the model.</strong> Find the values of the parameters (β₀, β₁, …, βₚ) that best fit the data. A common method is (ordinary) least squares.</p></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Parametric methods <em>simplify</em> the problem by assuming a specific form for <em>f</em>.</p>
</div>
</div>
</div>
</section>
<section id="example-linear-model-fit-to-income-data" class="level2">
<h2 class="anchored" data-anchor-id="example-linear-model-fit-to-income-data">Example: Linear Model Fit to Income Data</h2>
<div style="font-size: 0.7em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_4.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>Linear Model Fit</figcaption>
</figure>
</div>
<ul>
<li><p>A linear model (yellow plane) fit to the <code>Income</code> data (Figure 2.3).</p></li>
<li><p>Red dots are the observed data points.</p></li>
<li><p>The model assumes: <code>income ≈ β₀ + β₁ × education + β₂ × seniority</code>.</p></li>
<li><p>Linear model is relatively inflexible because it can generate linear functions</p></li>
</ul>
</div>
</section>
<section id="parametric-methods-advantages-and-disadvantages" class="level2">
<h2 class="anchored" data-anchor-id="parametric-methods-advantages-and-disadvantages">Parametric Methods: Advantages and Disadvantages</h2>
<div style="font-size: 0.7em;">
<ul>
<li><p><strong>Advantage:</strong> Simplifies the problem of estimating <em>f</em>. It’s easier to estimate a few parameters than an entirely arbitrary function.</p></li>
<li><p><strong>Disadvantage:</strong> The assumed form of <em>f</em> might be <em>wrong</em>. If the true <em>f</em> is very different from our assumed form, our estimate will be poor.</p></li>
<li><p><strong>Overfitting:</strong> If we use a very complex (flexible) model, we might <em>overfit</em> the data. This means the model follows the <em>noise</em> (random error) too closely, resulting in poor predictions on new data.</p></li>
</ul>
</div>
</section>
<section id="non-parametric-methods" class="level2">
<h2 class="anchored" data-anchor-id="non-parametric-methods">Non-parametric Methods</h2>
<div style="font-size: 0.7em;">
<ul>
<li><strong>Do <em>not</em> make explicit assumptions about the functional form of <em>f</em>.</strong></li>
<li>Seek an estimate of <em>f</em> that gets as close to the data points as possible, without being too rough or wiggly.</li>
<li><strong>Advantage:</strong> Can accurately fit a wider range of possible shapes for <em>f</em>. Avoids the risk of making a wrong assumption about the form of <em>f</em>.</li>
<li><strong>Disadvantage:</strong> Requires a <em>very large</em> number of observations to get an accurate estimate of <em>f</em>.</li>
</ul>
</div>
</section>
<section id="example-thin-plate-spline-fit-to-income-data" class="level2">
<h2 class="anchored" data-anchor-id="example-thin-plate-spline-fit-to-income-data">Example: Thin-Plate Spline Fit to Income Data</h2>
<div style="font-size: 0.7em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_5.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption>Thin-Plate Spline Fit</figcaption>
</figure>
</div>
<ul>
<li>A <em>thin-plate spline</em> (yellow surface) fit to the <code>Income</code> data.</li>
<li>This is a non-parametric method. No pre-specified model is assumed.</li>
<li>The fit is much closer to the true <em>f</em> (Figure 2.3) than the linear fit.</li>
<li>This is a <em>smooth</em> fit.</li>
</ul>
</div>
</section>
<section id="example-overfitting-with-a-rough-spline" class="level2">
<h2 class="anchored" data-anchor-id="example-overfitting-with-a-rough-spline">Example: Overfitting with a Rough Spline</h2>
<div style="font-size: 0.7em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_6.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption>Rough Spline Fit</figcaption>
</figure>
</div>
<ul>
<li>Same data, but a <em>rougher</em> thin-plate spline fit.</li>
<li>This fit perfectly matches the <em>training data</em> (zero error on training data!).</li>
<li><strong>BUT:</strong> This is an example of <em>overfitting</em>. The fit is too wiggly and will likely perform <em>poorly</em> on new data. It has captured the noise, not just the underlying pattern.</li>
</ul>
</div>
</section>
<section id="the-trade-off-between-prediction-accuracy-and-model-interpretability" class="level2">
<h2 class="anchored" data-anchor-id="the-trade-off-between-prediction-accuracy-and-model-interpretability">The Trade-Off Between Prediction Accuracy and Model Interpretability</h2>
<div style="font-size: 0.7em;">
<ul>
<li><p><strong>Flexibility:</strong> How many different shapes of functions can the method fit?</p>
<ul>
<li><em>Less flexible</em> (restrictive): Linear regression (only linear functions).</li>
<li><em>More flexible</em>: Thin-plate splines, neural networks.</li>
</ul></li>
<li><p><strong>Interpretability:</strong> How easy is it to understand the fitted model?</p>
<ul>
<li><em>More interpretable</em>: Linear regression (easy to understand coefficients).</li>
<li><em>Less interpretable</em>: Complex, non-linear models (hard to see how each predictor affects the response).</li>
</ul></li>
<li><p><strong>General rule:</strong> As flexibility <em>increases</em>, interpretability <em>decreases</em>.</p></li>
<li><p><strong>Important Trade-off:</strong> We often have to choose between more accurate, but less interpretable models, and simpler, more interpretable models.</p></li>
</ul>
</div>
</section>
<section id="why-choose-a-more-restrictive-method" class="level2">
<h2 class="anchored" data-anchor-id="why-choose-a-more-restrictive-method">Why Choose a More Restrictive Method?</h2>
<div style="font-size: 0.7em;">
<p>Even if we only care about prediction, a more restrictive model (like linear regression) can sometimes <em>outperform</em> a more flexible model!</p>
<p>Reasons:</p>
<ul>
<li><strong>Inference:</strong> If we’re interested in <em>understanding</em> the relationship, restrictive models are more interpretable.</li>
<li><strong>Overfitting:</strong> Flexible models can overfit the training data, leading to <em>poor</em> predictions on new data. A simpler model might generalize better.</li>
<li><strong>Curse of Dimensionality:</strong> With many predictors, flexible models can be hard to fit well and require huge amounts of data.</li>
</ul>
</div>
</section>
<section id="supervised-vs.-unsupervised-learning" class="level2">
<h2 class="anchored" data-anchor-id="supervised-vs.-unsupervised-learning">Supervised vs.&nbsp;Unsupervised Learning</h2>
<div style="font-size: 0.8em;">
<ul>
<li><strong>Supervised Learning:</strong> We have both predictors (X) and a response (Y) for each observation. We want to learn the relationship between X and Y.
<ul>
<li>Examples: Regression, classification.</li>
<li>Most of the methods in this book are supervised.</li>
</ul></li>
<li><strong>Unsupervised Learning:</strong> We only have predictors (X), <em>no</em> response (Y). We want to find patterns and structure in the data.
<ul>
<li>Example: <em>Cluster analysis</em> (grouping observations into clusters).</li>
</ul></li>
<li><strong>Semi-supervised Learning:</strong> A mix. We have (X, Y) for some observations, but only X for others.</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The distinction between supervised and unsupervised learning isn’t always clear-cut.</p>
</div>
</div>
</div>
</section>
<section id="example-cluster-analysis" class="level2">
<h2 class="anchored" data-anchor-id="example-cluster-analysis">Example: Cluster Analysis</h2>
<div style="font-size: 0.8em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_8.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>Cluster Analysis Example</figcaption>
</figure>
</div>
<ul>
<li><p>150 observations, two variables (X₁, X₂).</p></li>
<li><p><strong>Left:</strong> Three well-separated groups (clusters). Clustering should easily identify these.</p></li>
<li><p><strong>Right:</strong> Overlapping groups. Clustering is <em>much</em> harder.</p></li>
<li><p><strong>Goal:</strong> Identify distinct groups <em>without</em> knowing the group labels beforehand.</p></li>
<li><p>In the examples shown, there are only two variables, and we can check the scatterplots to identify clusters. But in practice, we cannot do that, and we need to use clustering and other unsupervised learning approaches.</p></li>
</ul>
</div>
</section>
<section id="regression-vs.-classification-problems" class="level2">
<h2 class="anchored" data-anchor-id="regression-vs.-classification-problems">Regression vs.&nbsp;Classification Problems</h2>
<div style="font-size: 0.7em;">
<ul>
<li><strong>Regression:</strong> The response variable (Y) is <em>quantitative</em> (numerical).
<ul>
<li>Example: Predicting income, house price, stock return.</li>
</ul></li>
<li><strong>Classification:</strong> The response variable (Y) is <em>qualitative</em> (categorical).
<ul>
<li>Example: Predicting whether someone will default on a loan (yes/no), which brand of product they’ll buy (A/B/C), or a medical diagnosis (disease 1/disease 2/no disease).</li>
</ul></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>Some methods are better suited to regression, others to classification. But many methods can be used for <em>both</em>.</li>
<li>Whether the <em>predictors</em> are quantitative or qualitative is usually less important than the type of <em>response</em>.</li>
</ul>
</div>
</div>
</div>
</section>
<section id="assessing-model-accuracy-regression" class="level2">
<h2 class="anchored" data-anchor-id="assessing-model-accuracy-regression">Assessing Model Accuracy: Regression</h2>
<div style="font-size: 0.7em;">
<ul>
<li><p><strong>Goal:</strong> Quantify how well our predictions match the observed data.</p></li>
<li><p><strong>Mean Squared Error (MSE):</strong> A common measure in regression:</p>
<p><span class="math display">\[
\text{MSE} = \frac{1}{n} \sum_{i=1}^{n} (y_i - \hat{f}(x_i))^2
\]</span></p>
<ul>
<li>yᵢ: The <em>true</em> response value for the <em>i</em>th observation.</li>
<li>f̂(xᵢ): The <em>predicted</em> response value for the <em>i</em>th observation.</li>
<li>Lower MSE is better (closer predictions).</li>
</ul></li>
<li><p><strong>Training MSE:</strong> Calculated using the <em>training data</em>.</p></li>
<li><p><strong>Test MSE:</strong> Calculated using <em>new, unseen</em> data (test data). This is what we <em>really</em> care about!</p></li>
</ul>
</div>
</section>
<section id="training-mse-vs.-test-mse" class="level2">
<h2 class="anchored" data-anchor-id="training-mse-vs.-test-mse">Training MSE vs.&nbsp;Test MSE</h2>
<div style="font-size: 0.8em;">
<ul>
<li><p>We usually don’t care how well the model fits the <em>training</em> data. We care about how well it predicts <em>new</em> data (the <em>test</em> data).</p></li>
<li><p>A model with low <em>training</em> MSE might have <em>high</em> test MSE (overfitting!).</p></li>
<li><p><strong>Ideally:</strong> We’d choose the model with the <em>lowest</em> test MSE.</p></li>
<li><p><strong>Problem:</strong> We often <em>don’t have</em> test data when building the model.</p></li>
<li><p><strong>Solution:</strong> Techniques like <em>cross-validation</em> (Chapter 5) can help us estimate the test MSE using the <em>training</em> data.</p></li>
</ul>
</div>
</section>
<section id="example-training-and-test-mse-vs.-flexibility" class="level2">
<h2 class="anchored" data-anchor-id="example-training-and-test-mse-vs.-flexibility">Example: Training and Test MSE vs.&nbsp;Flexibility</h2>
<div style="font-size: 0.7em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_9.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>MSE vs.&nbsp;Flexibility</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Left:</strong> Data simulated from a non-linear <em>f</em> (black curve). Three fits: linear (orange), smooth spline (blue), wiggly spline (green).</p></li>
<li><p><strong>Right:</strong></p>
<ul>
<li>Training MSE (grey curve): Decreases as flexibility <em>increases</em>.</li>
<li>Test MSE (red curve): U-shaped. Decreases, then <em>increases</em> (overfitting).</li>
<li>Dashed line: Minimum possible test MSE (irreducible error).</li>
</ul></li>
<li><p><strong>Observation:</strong> The blue curve (moderate flexibility) has the lowest test MSE.</p></li>
</ul>
</div>
</section>
<section id="the-bias-variance-trade-off" class="level2">
<h2 class="anchored" data-anchor-id="the-bias-variance-trade-off">The Bias-Variance Trade-Off</h2>
<div style="font-size: 0.7em;">
<p>The U-shape in the test MSE curve is due to two competing properties:</p>
<ul>
<li><strong>Variance:</strong> How much would our estimate of <em>f</em> (f̂) change if we used a <em>different</em> training set?
<ul>
<li><em>High</em> variance: f̂ changes a lot with different training sets (typical of flexible models).</li>
<li><em>Low</em> variance: f̂ is relatively stable (typical of less flexible models).</li>
</ul></li>
<li><strong>Bias:</strong> The error introduced by approximating a complex real-world problem with a simpler model.
<ul>
<li><em>High</em> bias: The model makes strong (and possibly wrong) assumptions about <em>f</em> (typical of less flexible models).</li>
<li><em>Low</em> bias: The model makes fewer assumptions (typical of flexible models).</li>
</ul></li>
<li>Expected test MSE at <em>x</em>0 can be decomposed to: <span class="math display">\[E(y_0 - \hat{f}(x_0))^2 = Var(\hat{f}(x_0)) + [Bias(\hat{f}(x_0))]^2 + Var(\epsilon)\]</span></li>
</ul>
</div>
</section>
<section id="bias-variance-trade-off-illustration" class="level2">
<h2 class="anchored" data-anchor-id="bias-variance-trade-off-illustration">Bias-Variance Trade-Off: Illustration</h2>
<div style="font-size: 0.7em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_12.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption>Bias-Variance Trade-Off</figcaption>
</figure>
</div>
<ul>
<li>Squared bias (blue), variance (orange), irreducible error (dashed), and test MSE (red) for the three examples.</li>
<li><strong>Left (non-linear <em>f</em>):</strong> Bias decreases rapidly, variance increases slowly.</li>
<li><strong>Center (nearly linear <em>f</em>):</strong> Bias is low, variance increases quickly.</li>
<li><strong>Right (very non-linear <em>f</em>):</strong> Bias decreases dramatically, variance is low.</li>
</ul>
<p><strong>Key takeaway:</strong> Good models need <em>both</em> low variance <em>and</em> low bias. This is a trade-off!</p>
</div>
</section>
<section id="assessing-model-accuracy-classification" class="level2">
<h2 class="anchored" data-anchor-id="assessing-model-accuracy-classification">Assessing Model Accuracy: Classification</h2>
<div style="font-size: 0.7em;">
<ul>
<li><strong>Error Rate:</strong> The proportion of mistakes made by the classifier.
<ul>
<li><p><strong>Training error rate:</strong></p>
<p><span class="math display">\[
\frac{1}{n} \sum_{i=1}^{n} I(y_i \ne \hat{y}_i)
\]</span></p>
<ul>
<li>yᵢ: True class label.</li>
<li>ŷᵢ: Predicted class label.</li>
<li>I(yᵢ ≠ ŷᵢ): Indicator variable (1 if mistake, 0 if correct).</li>
</ul></li>
<li><p><strong>Test error rate:</strong> <code>Ave(I(y₀ ≠ ŷ₀))</code>. This is what we care about!</p></li>
</ul></li>
<li><strong>Goal:</strong> Choose the classifier with the <em>lowest</em> test error rate.</li>
</ul>
</div>
</section>
<section id="the-bayes-classifier" class="level2">
<h2 class="anchored" data-anchor-id="the-bayes-classifier">The Bayes Classifier</h2>
<div style="font-size: 0.7em;">
<ul>
<li><strong>The “ideal” classifier:</strong> Assigns each observation to the <em>most likely</em> class, given its predictor values.</li>
<li><strong>Conditional probability:</strong> Pr(Y = j | X = x₀) - the probability that Y = j (class j), given the predictor values x₀.</li>
<li><strong>Bayes Classifier:</strong> Assigns an observation to the class <em>j</em> for which Pr(Y = j | X = x₀) is <em>largest</em>.</li>
<li><strong>Bayes Decision Boundary:</strong> The points where the conditional probabilities for different classes are equal.</li>
<li><strong>Bayes Error Rate:</strong> The <em>lowest possible</em> test error rate achievable. Analogous to the irreducible error.</li>
</ul>
</div>
</section>
<section id="example-bayes-classifier" class="level2">
<h2 class="anchored" data-anchor-id="example-bayes-classifier">Example: Bayes Classifier</h2>
<div style="font-size: 0.7em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_13.png" class="img-fluid figure-img" style="width:60.0%"></p>
<figcaption>Bayes Classifier Example</figcaption>
</figure>
</div>
<ul>
<li>Simulated data, two classes (orange, blue).</li>
<li>Purple dashed line: Bayes decision boundary.</li>
<li>Orange/blue shaded regions: Regions where the Bayes classifier would predict orange/blue.</li>
<li>The Bayes error rate is greater than zero because the classes <em>overlap</em>.</li>
</ul>
</div>
</section>
<section id="k-nearest-neighbors-knn" class="level2">
<h2 class="anchored" data-anchor-id="k-nearest-neighbors-knn">K-Nearest Neighbors (KNN)</h2>
<div style="font-size: 0.7em;">
<ul>
<li><strong>Problem:</strong> In reality, we <em>don’t know</em> the conditional distribution of Y given X. So, we can’t directly use the Bayes classifier.</li>
<li><strong>KNN:</strong> A <em>non-parametric</em> method that <em>estimates</em> the conditional distribution and then classifies based on the estimate.</li>
<li><strong>How it works:</strong>
<ol type="1">
<li>Given a test observation, x₀, find the <em>K</em> closest training observations (the “neighborhood”).</li>
<li>Estimate the conditional probability for class <em>j</em> as the fraction of neighbors in the neighborhood whose response value is <em>j</em>.</li>
<li>Classify x₀ to the class with the <em>highest</em> estimated probability.</li>
</ol></li>
</ul>
</div>
</section>
<section id="example-knn" class="level2">
<h2 class="anchored" data-anchor-id="example-knn">Example: KNN</h2>
<div style="font-size: 0.7em;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="figures/2_14.png" class="img-fluid figure-img" style="width:70.0%"></p>
<figcaption>KNN Example</figcaption>
</figure>
</div>
<ul>
<li><p><strong>Left:</strong> Small training set (6 blue, 6 orange). Black cross is the test observation. Circle shows the 3 nearest neighbors (K=3): 2 blue, 1 orange. KNN predicts “blue”.</p></li>
<li><p><strong>Right:</strong> KNN decision boundary (K=3) for all possible values of X₁ and X₂.</p></li>
<li><p>KNN can produce a decision boundary and classifier that’s close to Bayes Classifier.</p></li>
</ul>
</div>
</section>
<section id="knn-the-choice-of-k" class="level2">
<h2 class="anchored" data-anchor-id="knn-the-choice-of-k">KNN: The Choice of <em>K</em></h2>
<div style="font-size: 0.7em;">
<ul>
<li><p>The choice of <em>K</em> (the number of neighbors) controls the flexibility of the KNN classifier.</p>
<ul>
<li><em>Small K</em>: More flexible, lower bias, higher variance (risk of overfitting).</li>
<li><em>Large K</em>: Less flexible, higher bias, lower variance.</li>
</ul></li>
<li><p><strong>Example:</strong> Figure 2.16 shows KNN fits with K=1 and K=100. K=1 overfits, K=100 is too inflexible.</p></li>
<li><p><strong>Finding the best K:</strong> We want to choose <em>K</em> to minimize the <em>test</em> error rate. Techniques like cross-validation can help.</p></li>
</ul>
</div>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<div style="font-size: 0.8em;">
<ul>
<li><strong>Statistical learning</strong> is about estimating relationships between variables, for prediction and/or inference.</li>
<li><strong>Parametric methods</strong> assume a specific functional form; <strong>non-parametric methods</strong> don’t.</li>
<li>There’s a <strong>trade-off</strong> between model flexibility and interpretability.</li>
<li>We need to assess model accuracy using <strong>test data</strong> (or estimates of test error).</li>
<li>The <strong>bias-variance trade-off</strong> is fundamental: Good models need both low bias and low variance.</li>
<li>In classification, the <strong>Bayes classifier</strong> is optimal, but we often have to approximate it (e.g., with KNN).</li>
<li>Choosing the right level of <strong>flexibility</strong> is crucial.</li>
</ul>
</div>
</section>
<section id="thoughts-and-discussion" class="level2">
<h2 class="anchored" data-anchor-id="thoughts-and-discussion">Thoughts and Discussion</h2>
<div style="font-size: 0.8em;">
<ul>
<li>Think about real-world problems you’re interested in. Would you approach them with a focus on prediction, inference, or both?</li>
<li>Can you think of examples where a simple, interpretable model might be preferable to a more complex, “black box” model, even for prediction?</li>
<li>How might the “best” model (in terms of test error) depend on the <em>amount</em> of data available?</li>
<li>How does the concept of “overfitting” relate to the bias-variance trade-off?</li>
<li>Discuss the differences and similarities between supervised, unsupervised, and semi-supervised learning, and how they apply to real-world problems.</li>
</ul>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/qiufei\.github\.io\/web-slide-r");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>🔋<a href="https://posit.co"><img src="https://posit.co/wp-content/themes/Posit/assets/images/posit-logo-2024.png" class="img-fluid" alt="Posit" width="65"></a></p>
</div>   
    <div class="nav-footer-center">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
 邱飞 © 2025
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="https://beian.miit.gov.cn">
<p>浙ICP备 2024072710号-1</p>
</a>
  </li>  
    <li class="nav-item">
    <a class="nav-link" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33021202002511">
<p>浙公网安备 33021202002511号</p>
</a>
  </li>  
</ul>
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:hfutqiufei@163.com">
      <i class="bi bi-envelope-at-fill" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>